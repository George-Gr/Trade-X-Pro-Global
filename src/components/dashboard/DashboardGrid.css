/* 
 * Dashboard Grid Layout System
 * 
 * Advanced CSS Grid implementation for responsive dashboard layouts
 * Supports adaptive grid with auto-fit, minimum card width constraints,
 * and smooth responsive transitions across all breakpoints.
 * 
 * Features:
 * - Auto-fit grid with minimum 280px card width
 * - Smooth transitions and responsive behavior
 * - Support for 1-20+ dashboard cards
 * - Works on screens from 320px to 2560px
 * - Dark mode and accessibility support
 * - Print-friendly styles
 */

/* ============================================
   DASHBOARD GRID BASE LAYOUT
   ============================================ */

.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-md, 16px);
  width: 100%;
  padding: 0;
  margin: 0;
  list-style: none;
  animation: gridLayout 0.3s ease-in-out;
}

/* Grid animation for smooth transitions */
@keyframes gridLayout {
  from {
    opacity: 0.95;
  }
  to {
    opacity: 1;
  }
}

/* ============================================
   MOBILE LAYOUT (320px - 639px)
   ============================================ */

@media (max-width: 639px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
    gap: var(--space-sm, 8px);
    padding: 0;
  }

  /* Ensure cards are full-width on mobile */
  .dashboard-grid > * {
    min-width: 0;
    max-width: 100%;
  }
}

/* ============================================
   TABLET LAYOUT (640px - 1023px)
   ============================================ */

@media (min-width: 640px) and (max-width: 1023px) {
  .dashboard-grid {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-md, 16px);
  }

  /* Ensure 2-column layout on most tablets */
  @media (min-width: 640px) and (max-width: 768px) {
    .dashboard-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* 3-column on larger tablets */
  @media (min-width: 769px) and (max-width: 1023px) {
    .dashboard-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
}

/* ============================================
   DESKTOP LAYOUT (1024px and above)
   ============================================ */

@media (min-width: 1024px) {
  .dashboard-grid {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-lg, 24px);
  }

  /* 4-column layout on standard desktop (1200px+) */
  @media (min-width: 1200px) {
    .dashboard-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* 5-column layout on large desktop (1536px+) */
  @media (min-width: 1536px) {
    .dashboard-grid {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  /* 6-column layout on ultra-wide (2560px+) */
  @media (min-width: 2560px) {
    .dashboard-grid {
      grid-template-columns: repeat(6, 1fr);
    }
  }
}

/* ============================================
   GRID ITEM STYLING
   ============================================ */

.dashboard-grid > * {
  /* Ensure all grid items fill their grid cell */
  min-width: 0;
  
  /* Support for sub-grid layouts */
  display: flex;
  flex-direction: column;
  
  /* Smooth transitions for responsive changes */
  transition: all 0.3s ease-in-out;
}

/* ============================================
   CARD SIZING AND CONSTRAINTS
   ============================================ */

/* Minimum height for cards to ensure readability */
.dashboard-grid .card {
  min-height: 200px;
}

/* Ensure card content grows vertically */
.dashboard-grid .card-content {
  flex: 1;
}

/* ============================================
   SPECIAL GRID VARIATIONS
   ============================================ */

/* Full-width grid item (spans entire width) */
.dashboard-grid-full {
  grid-column: 1 / -1;
}

/* Half-width grid item */
.dashboard-grid-half {
  grid-column: span 2;
}

@media (max-width: 1023px) {
  .dashboard-grid-half {
    grid-column: span 1;
  }
}

/* Two-column grid item */
.dashboard-grid-2col {
  grid-column: span 2;
}

@media (max-width: 1023px) {
  .dashboard-grid-2col {
    grid-column: span 1;
  }
}

/* Three-column grid item */
.dashboard-grid-3col {
  grid-column: span 3;
}

@media (max-width: 1200px) {
  .dashboard-grid-3col {
    grid-column: span 2;
  }
}

@media (max-width: 768px) {
  .dashboard-grid-3col {
    grid-column: span 1;
  }
}

/* ============================================
   DYNAMIC CONTENT HANDLING
   ============================================ */

/* Handle varying numbers of cards gracefully */

/* 1-2 cards: Center or spread naturally */
.dashboard-grid:has(> :only-child) {
  grid-template-columns: 1fr;
}

.dashboard-grid:has(> :nth-child(2):last-child) {
  grid-template-columns: repeat(2, 1fr);
}

@media (max-width: 768px) {
  .dashboard-grid:has(> :only-child),
  .dashboard-grid:has(> :nth-child(2):last-child) {
    grid-template-columns: 1fr;
  }
}

/* 3-6 cards: Balanced layout */
.dashboard-grid:has(
  > :nth-child(3):not(:last-child),
  > :nth-child(6):last-child
) {
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

/* 7-12 cards: Optimal 4-column on desktop */
@media (min-width: 1024px) {
  .dashboard-grid:has(
    > :nth-child(7):not(:last-child),
    > :nth-child(12):last-child
  ) {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* ============================================
   INTERACTIVE STATES
   ============================================ */

/* Hover effects on grid items (interactive cards) */
.dashboard-grid .card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

/* Focus state for keyboard navigation */
.dashboard-grid .card:focus-within {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Active/clicked state */
.dashboard-grid .card:active {
  transform: translateY(-2px);
}

/* ============================================
   LOADING AND EMPTY STATES
   ============================================ */

/* Skeleton loader animation for grid items */
.dashboard-grid .skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted)) 50%,
    hsl(var(--background)) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Empty state styling */
.dashboard-grid-empty {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* Support for reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .dashboard-grid,
  .dashboard-grid > * {
    animation: none;
    transition: none;
  }

  .dashboard-grid .card:hover {
    transform: none;
  }
}

/* Support for high contrast mode */
@media (prefers-contrast: high) {
  .dashboard-grid > * {
    border-width: 2px;
  }

  .dashboard-grid .card:focus-within {
    outline-width: 3px;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    page-break-inside: avoid;
  }

  .dashboard-grid > * {
    page-break-inside: avoid;
  }

  .dashboard-grid .card {
    box-shadow: none;
    border: 1px solid #ccc;
  }
}

/* ============================================
   FALLBACK FOR OLDER BROWSERS
   ============================================ */

/* Fallback for browsers without CSS Grid support */
@supports not (display: grid) {
  .dashboard-grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md, 16px);
  }

  .dashboard-grid > * {
    flex: 1 1 calc(50% - 8px);
    min-width: 280px;
  }

  @media (max-width: 768px) {
    .dashboard-grid > * {
      flex: 1 1 100%;
    }
  }

  @media (min-width: 1024px) {
    .dashboard-grid > * {
      flex: 1 1 calc(25% - 18px);
    }
  }

  .dashboard-grid-full {
    flex: 1 1 100%;
  }

  .dashboard-grid-half {
    flex: 1 1 100%;
  }

  .dashboard-grid-2col {
    flex: 1 1 100%;
  }

  .dashboard-grid-3col {
    flex: 1 1 100%;
  }
}

/* ============================================
   GRID DEBUGGING AND DEVELOPMENT
   ============================================ */

/* Temporary debugging class - remove in production */
.dashboard-grid-debug {
  border: 1px dashed rgba(0, 0, 0, 0.2);
  background-color: rgba(0, 0, 0, 0.02);
}

.dashboard-grid-debug > * {
  border: 1px dashed rgba(0, 0, 0, 0.3);
  background-color: rgba(255, 0, 0, 0.05);
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

/* Use will-change sparingly for performance */
.dashboard-grid {
  will-change: grid-template-columns;
}

/* Remove will-change after interaction */
.dashboard-grid.interactive {
  will-change: auto;
}

/* GPU acceleration for smooth animations */
.dashboard-grid > * {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* ============================================
   RESPONSIVE CONTAINER QUERIES (Future)
   ============================================ */

/* Container queries for per-card responsive behavior */
@supports (container-type: inline-size) {
  .dashboard-grid {
    container-type: inline-size;
  }

  @container (min-width: 320px) {
    .dashboard-grid .card-content {
      display: grid;
      gap: var(--space-sm);
    }
  }

  @container (min-width: 600px) {
    .dashboard-grid .card-content {
      display: grid;
      gap: var(--space-md);
    }
  }
}
